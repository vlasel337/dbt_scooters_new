version: 2

sources:
  - name: "scooters_raw" 
    description: "Raw data provided by scooters service (the name of the scheme)"
    loader: "https://t.me/inzhenerka_dbt_bot"
    tables:
      - name: "trips"
        description: "Scooter trips"

      - name: "users"
        description: "Users of scooter service"

      - name: "events"
        description: "Raw user events with duplicates"

models:
  - name: "trips_prep"
    description: "Tuned trips view"
    config:
      materialized: view
  - name: "trips_stat"
    description: "Overall trips statistics"
  - name: "trips_stat_daily"
    description: "Daily trips statistics"
    config:
      indexes:
        - columns: ["date"]
  - name: "trips_age_daily"
    description: "Daily trips statistics by user age"
  - name: "trips_age_daily_stat"
    description: "Aggregation of daily trips statistics by user age"
  - name: "trips_users"
    description: "Rides enriched with users personal data"
    config:
      materialized: "incremental"
  - name: "events_clean"
    description: "Dedublicated events table"
    config:
      materialized: "incremental"

      

    


  

      